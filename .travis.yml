dist: trusty
group: deprecated-2017Q4
language: python
sudo: required
python:
- '2.7'
env:
- CKANVERSION=master
- CKANVERSION=2.8
install:
- bash bin/travis-build.bash
services:
- redis-server
- postgresql
script: sh bin/travis-run.sh
before_install:
- pip install codecov
after_success:
- codecov
matrix:
  include:
  - name: Flake8 on Python 2.7
    dist: xenial
    cache: pip
    install: pip install flake8
    script:
    - flake8 --version
    - flake8 . --count --max-complexity=14 --max-line-length=127 --statistics --exclude
      ckan,{{ project }}
    python: 2.7
    env:
    - FLAKE8=true
    - CKANVERSION=master
notifications:
  slack:
    rooms:
      secure: NBTH29wIH3luXpe11e7wcl4lQjGDCI+WeRPCxCfPQOU5a87SKJwu11cK5pf9Jk8QmUqEPbXdgRz3ijhIFjeruRh7zlQixVWU9pnyHxYbP3IAwRC09W40M8sPRc59mePQ/UbIrJvQhd8Pr+kJ6cgRKDyOv8pbp7F8DToST5GxdQKVMJB5hh20/ctUQdSZkjqMHG951j5Oz2DDyX9uA83VyYm39GplcU6H5+C44A1iuRhTyepB5pssj9hNbZuR1//amtXRYoLn5P6vbHlaCoVXIbr3tFAxwLMhdylau0h7BCmYcNBzDrbEvKwZCRMs2EwQdjw8vzwXd64kCbQw/RPUldaNInS+Q2qDyfxMWI9ClGBOV/Vx/963NR7FbsZ3+PlkN8N0vZmB3wDj8jHOsUlJ+4dAi1ITnCKwYS5QY1LSxqeFkYnxt5J96Q77BjJBbGLPVN4/diS70HJPpXLlHqAdEl2OxYsEApsKOExa2zj9NbdzzGAu0koBsvYE+bphWAtDUVkmT+XzyH3EeOr5jWpGewfIDj4BcvBD2ozdojpM7OpX+Kj06x5SGqvzGm6PHTDTlQOSs1XzoHsngE3RhHQR/48+X+2xcmVhxwaDfStc+pIZSSJYvsxCgmrf7k2zZ0WICoqm8BqubzgR7jegnCik8y3RM65E853UiXiMKb9Pc7g=
    on_success: change
    on_failure: always
    on_pull_requests: false
  email:
    on_success: never
    on_failure: never
