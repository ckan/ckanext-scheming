{% extends "package/read.html" %}

{%- set schema = h.scheming_get_dataset_schema(dataset_type) -%}

{% block package_notes %}
  {%- if not dataset_type -%}
    <p>
    dataset_type not passed to template. your version of CKAN
    might not be compatible with ckanext-scheming
    </p>
  {%- endif -%}
  {% if (h.scheming_field_by_name(schema.dataset_fields, 'notes') or
    h.scheming_field_by_name(schema.dataset_fields, 'notes_translated')) and
    pkg.notes%}
    <div class="notes embedded-content">
      {{ h.render_markdown(h.get_translated(pkg, 'notes')) }}
    </div>
  {% endif %}
{% endblock %}

{% block package_resources %}
  {% asset 'ckanext-unaids/BulkFileUploaderComponentStyles' %}
  <div
      id="BulkFileUploaderComponent"
      data-lfsServer="{{ h.blob_storage_server_url() }}"
      data-maxResourceSize="{{ h.max_resource_size() }}"
      data-orgId="{{ pkg.organization.name }}"
      data-datasetName="{{ pkg.name }}"
      data-defaultFields="{{ h.bulk_file_uploader_default_fields() }}"
  ></div>
  {% asset 'ckanext-unaids/BulkFileUploaderComponentScripts' %}
  <div id="ContentToMoveInsideDropzone">
    {% snippet "scheming/package/snippets/resources_list.html", pkg=pkg, resources=pkg.resources, schema=schema %}
  </div>
{% endblock %}

{% block package_additional_info %}
  {% snippet "scheming/package/snippets/additional_info.html",
    pkg_dict=pkg, dataset_type=dataset_type, schema=schema %}
{% endblock %}
