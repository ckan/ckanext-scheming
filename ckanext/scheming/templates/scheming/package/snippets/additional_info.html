{% extends "package/snippets/additional_info.html" %}

{%- set exclude_fields = [
    'title', 
        'name',
        'notes',
        'tag_string',
        'license_id',
        'owner_org',
        'author',
        'author_email',
        'maintainer',
        'maintainer_email'
            ] -%}

{% block package_additional_info %}
  {%- if pkg_dict.author_email -%}
    <tr>
      <th scope="row" class="dataset-label">{{ _("Author") }}</th>
      <td class="dataset-details" property="dc:creator">{{ 
          h.mail_to(email_address=pkg_dict.author_email, name=pkg_dict.author) }}</td>
    </tr>
  {%- elif pkg_dict.author -%}
    <tr>
      <th scope="row" class="dataset-label">{{ _("Author") }}</th>
      <td class="dataset-details" property="dc:creator">{{ pkg_dict.author }}</td>
    </tr>
  {%- endif -%}

  {%- if pkg_dict.maintainer_email -%}
    <tr>
      <th scope="row" class="dataset-label">{{ _("Maintainer") }}</th>
      <td class="dataset-details" property="dc:contributor">{{ 
          h.mail_to(email_address=pkg_dict.maintainer_email, 
          name=pkg_dict.maintainer) }}</td>
    </tr>
  {%- elif pkg_dict.maintainer -%}
    <tr>
      <th scope="row" class="dataset-label">{{ _("Maintainer") }}</th>
      <td class="dataset-details" property="dc:contributor">{{ 
          pkg_dict.maintainer }}</td>
    </tr>
  {%- endif -%}

  {%- for field in schema.dataset_fields -%}
    {%- if field.field_name not in exclude_fields -%}
      <tr>
        <th scope="row" class="dataset-label">{{
          h.scheming_language_text(field.label) }}</th>
        <td class="dataset-details"{%
          if field.display_property %} property="{{ field.display_property
          }}"{% endif %}>{%- snippet 'scheming/snippets/display_field.html',
          field=field, data=pkg_dict -%}</td>
      </tr>
    {%- endif -%}
  {%- endfor -%}
  {% if h.check_access('package_update',{'id':pkg_dict.id}) %}
    <tr>
      <th scope="row" class="dataset-label">{{ _("State") }}</th>
      <td class="dataset-details">{{ pkg_dict.state }}</td>
    </tr>
  {% endif %}
{% endblock %}
